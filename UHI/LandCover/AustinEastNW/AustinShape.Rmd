---
title: "AustinLandCover"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, include=FALSE}
library(tidyverse)
library(sf)
library(leaflet)
library(tmap)
library(spatstat)
library(maptools)
library(sp)
library(raster)
library(beepr)
library(RColorBrewer)
library(stargazer)
```

```{r}
#landcoverNW = st_read(dsn = ".", layer = "AustinEastNW") %>% 
 #  st_transform(crs = 4326)

#hi
landcoverwaller = st_read(dsn = ".", layer = "coverwaller3") %>% 
  mutate(landm2 = Shape_Area/23.17)
beep(8)
```

```{r}
ggplot(landcoverwaller)+
  geom_bar(aes(x = FEATURE))+
  theme_classic()
```

```{r}
wlr_area = 2853746.96 #m2
land_sum = landcoverwaller %>% 
  group_by(FEATURE) %>% 
  summarise(sum_area = sum(landm2)) %>% 
  arrange(-sum_area)
land_sum


#beep(6)
#frac_impervous=((sum(land_sum$sum_area)-(18010340+536880+111809.4+60614.13+48861.97+21312.08))/sum(land_sum$sum_area))
#frac_impervous
```



```{r}

pavedwaller = landcoverwaller %>% 
filter(FEATURE == "Structure"| FEATURE == "Paved"| FEATURE == "Sidewalk"| FEATURE == "Paved Parking"| FEATURE == "Edge of Paved Road")
#filter(FEATURE == "Remaining Pervious Area")



cover_plot = ggplot(landcoverwaller)+
  geom_sf(aes(fill = FEATURE))+
  #scale_fill_brewer(palette="Set1")+
  labs(x = "", y = "", title = "Land Cover Features")+
  theme_minimal()+
  coord_sf(datum=NA)
  
cover_plot 
beep(1)

```

```{r}

waller3outline = st_read(dsn = ".", layer = "WLR3") %>% 
  st_transform(crs = 4326)

tmap_mode(mode = "view")
tm_basemap("Esri.WorldImagery")+
  tm_shape(waller3outline)+
  tm_borders(col = "black", lwd = 3)+
  tm_legend(title ="Land Cover Fractions")
 
```


```{r}
tree_area = 798105
bare_soil = 
Fr_Paved=0

Fr_Bldgs= 2.396607e+05/wlr_area #This is taken from the sum of all land area coded as structure

Fr_DecTr= tree_area/wlr_area
#This is taken by adding up all the 1by1 m squares that are marked as being tree canopy from the 2010 tree cover dataset. To see the original data look at the wlr_landuse arc project in the wlr_tree_count shapefile 

Fr_Grass=7.773128e+05- #This is the remaining pervious area as from the land_sum subtracted by the area of the trees and bare soil

Fr_Bsoil=0

Fr_Water=0 #Taken from landuse code data set 

Fr_Paved+Fr_Bldgs+Fr_DecTr+Fr_Grass+Fr_Bsoil+Fr_Water
```

